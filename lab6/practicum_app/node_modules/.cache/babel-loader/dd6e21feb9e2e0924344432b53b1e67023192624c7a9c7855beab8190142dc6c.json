{"ast":null,"code":"var _jsxFileName = \"/Users/a1111/Study/6 sem/web/labs/labsWeb2semac/lab6/practicum_app/src/ChartDraw.js\",\n  _s = $RefreshSig$();\nimport * as d3 from 'd3';\nimport { useEffect, useMemo, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChartDraw = ({\n  data,\n  oy,\n  chartType\n}) => {\n  _s();\n  const svgRef = useRef(null);\n  const margin = {\n    top: 20,\n    right: 30,\n    bottom: 90,\n    left: 40\n  };\n  const width = 800,\n    height = 400;\n  const boundsW = width - margin.left - margin.right;\n  const boundsH = height - margin.top - margin.bottom;\n  const allY = data.flatMap(d => {\n    const a = [];\n    if (oy[0]) a.push(d.values[0]);\n    if (oy[1]) a.push(d.values[1]);\n    return a;\n  });\n  const [minY, maxY] = d3.extent(allY);\n  const scaleX = useMemo(() => d3.scaleBand().domain(data.map(d => d.labelX)).range([0, boundsW]).padding(0.2), [data]);\n  const scaleY = useMemo(() => d3.scaleLinear().domain([minY * 0.85, maxY * 1.1]).range([boundsH, 0]), [minY, maxY]);\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    // draw axes\n    svg.append('g').attr('transform', `translate(${margin.left},${height - margin.bottom})`).call(d3.axisBottom(scaleX)).selectAll('text').attr('transform', 'rotate(-30)').style('text-anchor', 'end');\n    svg.append('g').attr('transform', `translate(${margin.left},${margin.top})`).call(d3.axisLeft(scaleY));\n\n    // legend\n    const legend = svg.append('g').attr('transform', `translate(${width - margin.right + 10},${margin.top})`);\n    if (oy[0]) {\n      legend.append('rect').attr('width', 18).attr('height', 18).attr('fill', 'red');\n      legend.append('text').attr('x', 24).attr('y', 9).attr('dy', '.35em').text('Макс');\n    }\n    if (oy[1]) {\n      legend.append('rect').attr('width', 18).attr('height', 18).attr('fill', 'blue').attr('y', oy[0] ? 25 : 0);\n      legend.append('text').attr('x', 24).attr('y', oy[0] ? 34 : 9).attr('dy', '.35em').text('Мин');\n    }\n\n    // draw data\n    if (chartType === 'scatter') {\n      data.forEach(d => {\n        const x = scaleX(d.labelX) + scaleX.bandwidth() / 2;\n        if (oy[0]) svg.append('circle').attr('cx', x).attr('cy', scaleY(d.values[0])).attr('r', 5).attr('transform', `translate(${margin.left},${margin.top})`).style('fill', 'red');\n        if (oy[1]) svg.append('circle').attr('cx', x).attr('cy', scaleY(d.values[1])).attr('r', 5).attr('transform', `translate(${margin.left},${margin.top})`).style('fill', 'blue');\n      });\n    } else {\n      data.forEach(d => {\n        const x0 = scaleX(d.labelX);\n        const bw = scaleX.bandwidth() / (oy[0] && oy[1] ? 2 : 1);\n        if (oy[0]) svg.append('rect').attr('x', x0).attr('y', scaleY(d.values[0])).attr('width', bw).attr('height', boundsH - scaleY(d.values[0])).attr('transform', `translate(${margin.left},${margin.top})`).attr('fill', 'red');\n        if (oy[1]) svg.append('rect').attr('x', x0 + (oy[0] ? bw : 0)).attr('y', scaleY(d.values[1])).attr('width', bw).attr('height', boundsH - scaleY(d.values[1])).attr('transform', `translate(${margin.left},${margin.top})`).attr('fill', 'blue');\n      });\n    }\n  }, [data, oy, chartType]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: svgRef,\n    width: width,\n    height: height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 10\n  }, this);\n};\n_s(ChartDraw, \"ZkmihwucnqWvfW3hmXX2XqpX36I=\");\n_c = ChartDraw;\nexport default ChartDraw;\nvar _c;\n$RefreshReg$(_c, \"ChartDraw\");","map":{"version":3,"names":["d3","useEffect","useMemo","useRef","jsxDEV","_jsxDEV","ChartDraw","data","oy","chartType","_s","svgRef","margin","top","right","bottom","left","width","height","boundsW","boundsH","allY","flatMap","d","a","push","values","minY","maxY","extent","scaleX","scaleBand","domain","map","labelX","range","padding","scaleY","scaleLinear","svg","select","current","selectAll","remove","append","attr","call","axisBottom","style","axisLeft","legend","text","forEach","x","bandwidth","x0","bw","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/a1111/Study/6 sem/web/labs/labsWeb2semac/lab6/practicum_app/src/ChartDraw.js"],"sourcesContent":["import * as d3 from 'd3';\nimport { useEffect, useMemo, useRef } from 'react';\n\nconst ChartDraw = ({ data, oy, chartType }) => {\n  const svgRef = useRef(null);\n  const margin = { top:20, right:30, bottom:90, left:40 };\n  const width = 800, height = 400;\n  const boundsW = width - margin.left - margin.right;\n  const boundsH = height - margin.top - margin.bottom;\n\n  const allY = data.flatMap(d => {\n    const a = [];\n    if (oy[0]) a.push(d.values[0]);\n    if (oy[1]) a.push(d.values[1]);\n    return a;\n  });\n  const [minY, maxY] = d3.extent(allY);\n\n  const scaleX = useMemo(() => d3.scaleBand()\n    .domain(data.map(d => d.labelX))\n    .range([0, boundsW]).padding(0.2), [data]);\n  const scaleY = useMemo(() => d3.scaleLinear()\n    .domain([minY*0.85, maxY*1.1])\n    .range([boundsH, 0]), [minY, maxY]);\n\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    // draw axes\n    svg.append('g')\n      .attr('transform',`translate(${margin.left},${height - margin.bottom})`)\n      .call(d3.axisBottom(scaleX)).selectAll('text')\n      .attr('transform','rotate(-30)').style('text-anchor','end');\n    svg.append('g')\n      .attr('transform',`translate(${margin.left},${margin.top})`)\n      .call(d3.axisLeft(scaleY));\n\n    // legend\n    const legend = svg.append('g').attr('transform',`translate(${width - margin.right + 10},${margin.top})`);\n    if (oy[0]) {\n      legend.append('rect').attr('width',18).attr('height',18).attr('fill','red');\n      legend.append('text').attr('x',24).attr('y',9).attr('dy','.35em').text('Макс');\n    }\n    if (oy[1]) {\n      legend.append('rect').attr('width',18).attr('height',18).attr('fill','blue').attr('y',oy[0]?25:0);\n      legend.append('text').attr('x',24).attr('y',oy[0]?34:9).attr('dy','.35em').text('Мин');\n    }\n\n    // draw data\n    if (chartType === 'scatter') {\n      data.forEach(d => {\n        const x = scaleX(d.labelX) + scaleX.bandwidth()/2;\n        if (oy[0]) svg.append('circle')\n          .attr('cx',x).attr('cy',scaleY(d.values[0]))\n          .attr('r',5).attr('transform',`translate(${margin.left},${margin.top})`).style('fill','red');\n        if (oy[1]) svg.append('circle')\n          .attr('cx',x).attr('cy',scaleY(d.values[1]))\n          .attr('r',5).attr('transform',`translate(${margin.left},${margin.top})`).style('fill','blue');\n      });\n    } else {\n      data.forEach(d => {\n        const x0 = scaleX(d.labelX);\n        const bw = scaleX.bandwidth() / (oy[0]&&oy[1]?2:1);\n        if (oy[0]) svg.append('rect')\n          .attr('x',x0).attr('y',scaleY(d.values[0]))\n          .attr('width',bw).attr('height',boundsH-scaleY(d.values[0]))\n          .attr('transform',`translate(${margin.left},${margin.top})`).attr('fill','red');\n        if (oy[1]) svg.append('rect')\n          .attr('x',x0 + (oy[0]?bw:0)).attr('y',scaleY(d.values[1]))\n          .attr('width',bw).attr('height',boundsH-scaleY(d.values[1]))\n          .attr('transform',`translate(${margin.left},${margin.top})`).attr('fill','blue');\n      });\n    }\n  }, [data, oy, chartType]);\n\n  return <svg ref={svgRef} width={width} height={height}></svg>;\n};\n\nexport default ChartDraw;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}